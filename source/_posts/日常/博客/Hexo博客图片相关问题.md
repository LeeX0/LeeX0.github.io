---
title: Hexo博客图片相关问题
tags:
  - - Hexo
  - - blog
categories:
  - - 日常
    - 博客
abbrlink: '9e17967'
date: 2021-06-28 17:21:40
---

> Hexo博客图片在本地与推送中显示存在一些问题。自己一些Markdown文档存放组织也有一些问题。
>
> 一些问题与思考都放在这里。

## 1. 问题与需求

### 1.1 文件组织

- 对我使用情况与习惯来讲，**各种Markdown文档应该存放于各处**，如博客文章就应该存放于博客文件夹下，方便推送；各项目文档就应该放在项目所在文件夹下，方便统一查看。
- **想要有一个能看到所有文档的界面，超越于文件夹之间的隔离限制**。比如在这个软件中能看到博客文章，也能看到其他文档。
- ~~使用`MWeb`、`Bear`等管理文档，**文档都在app自建数据库与目录组织之下，不方便不同文件夹下文档管理**~~。更正：实际上MWeb的外部模式能很好的引入本地的文件夹进行文档库类似的管理，非常方便。
- 使用`Typora`编辑文档，**文档组织能力比较弱，不方便跨文件夹来回翻阅文档**（通过最近打开这种方式并不方便，况且没有便签管理、版本控制之类的文档管理额外功能）。

### 1.2 图片显示与保存

- 由于Hexo自身原因，在编写博客内容时需要使用一个相对路径`/image/xx/xxx.png`来引用`Blog/source/image/xx/xxx.png`中存放的图片，这样在generate后博客才能正常显示图片。而这种路径写法下在Typora中并不显示图片。

## 2. 图片解决办法

### 2.1 图床（未采用）

使用图床能够将图片全部以链接形式保存，且不用考虑文件存放相关问题。

但我的认为，特别是博客，**文档应该和图片放在同一位置，都在自己手中保存最稳妥**，内容量本身也不会太大。

况且，我使用的`GitHub + Hexo`的访问展示博客，本身图片能够被推到仓库中，也算是一种图床了。

**最后没有使用图床的方案**。但进行了图床的配置使用（七牛云），有需要的可以参考[此文](https://leex0.top/posts/d6a29df8/)。

### 2.2 Hexo插件`hexo-asset-image`（采用）

使用[CodeFalling/hexo-asset-image](CodeFalling/hexo-asset-image)插件。

#### 2.2.1 Hexo配置`post_asset_folder`

首先将Hexo配置文件`_config.yml`中的`post_asset_folder`选项设置为`true`。

> 官网[描述](https://hexo.io/zh-cn/docs/asset-folders)：
>
> 对于那些想要更有规律地提供图片和其他资源以及想要将他们的资源分布在各个文章上的人来说，Hexo也提供了更组织化的方式来管理资源。这个稍微有些复杂但是管理资源非常方便的功能可以通过将 `config.yml` 文件中的 `post_asset_folder` 选项设为 `true` 来打开。
>
> 当资源文件管理功能打开后，Hexo将会在你每一次通过 `hexo new [layout] <title>` 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们，这样你就得到了一个更简单而且方便得多的工作流。

即`hexo new`新建文章时，会**在文章目录下新建一个文章同名文件夹用来保存该文章相关的图片资源**。（自行创建同名文件夹效果一样）

#### 2.2.2 使用`hexo-asset-image`

在配置完上述`post_asset_folder`选项后，可在文章xx中通过`xx/xxx.png`或者`./xx/xxx.png`引用`/source/_posts/xx/xxx.png`图片资源。

这种引用方式**在`Typora`中能展示图片**，这解决了第一步。

但这种方式下，博客生成推送后不能正常显示图片，所以需要`hexo-asset-image`插件来**使Hexo在生成博客时能正确产生图片url**。

```bash
npm install hexo-asset-image --save
```

安装插件后，即能通过上述方式引入图片资源，生成博客后也能正常显示图片。

## 3. 文件组织解决办法

> 接续*1.1*中的更正：MWeb外部模式能够比较好进行本地的文档管理，且能够指定插入图片的保存位置（可以兼容Hexo默认的图片保存与饮用方式），目前选择照片与文档保存在同一文件夹下管理也算比较方便，就不再换了，保持**`post_asset_folder与hexo-asset-image组合方式`**。

感觉自己的需求有些麻烦，需要在统一的界面中管理各个文件夹中的文档，而且还需要兼顾博客与博客图片的问题，有些麻烦。最后考虑分别管理。

~~**将`Typora`作为博客的管理应用，且作为md编辑器。使用MWeb管理其他文档。**~~

~~**在写博客时候用`Typora`打开博客所用的`_post`目录进行操作编辑。**~~

~~**将其他文档都写入`MWeb`中，进行日常的编写，在需要导出时通过`MWeb`导出并将文档存放在合适的位置。**~~

~~算是一种折中的办法，且多少有点麻烦，但还没有想好更好的方式。~~

**<u>统一采用`MWeb`进行文档管理，编辑可以采用`Typora`。</u>**

看到有使用`Alfred workflow`来实现`MWeb`中的生成文档在`Typora`中编辑，但这也没有很好的解决我的文件组织问题，所以也没有尝试。

---

> 参考：
>
> https://hexo.io/zh-cn/docs/asset-folders
>
> https://www.jianshu.com/p/950f8f13a36c
